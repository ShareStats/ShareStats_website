<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="utf-8">
	<title>Search</title>

	<!-- mobile responsive meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="Project site for ShareStats">
	
	<meta name="author" content="Themefisher">
	<meta name="generator" content="Hugo 0.83.1" />

	<!-- plugins -->
	
	<link rel="stylesheet" href="https://www.sharestats.nl/plugins/bootstrap/bootstrap.min.css">
	
	<link rel="stylesheet" href="https://www.sharestats.nl/plugins/themify-icons/themify-icons.css">
	
	<link rel="stylesheet" href="https://www.sharestats.nl/plugins/magnific-popup/magnific-popup.css">
	
	<link rel="stylesheet" href="https://www.sharestats.nl/plugins/slick/slick.css">
	
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Anaheim%7cQuattrocento&#43;Sans:400,700&amp;display=swap">
	

	<!-- Main Stylesheet -->
	
	<link rel="stylesheet" href="https://www.sharestats.nl/css/style.min.css" media="screen">

	<!-- Custom stylesheet - for your changes -->
	
  <link rel="stylesheet" href="https://www.sharestats.nl/css/custom.min.css" media="screen">

	<!--Favicon-->
    <link rel="shortcut icon" type="image/png" href="/images/icon-192x192.png">
    <link rel="shortcut icon" sizes="192x192" href="/images/icon-192x192.png">
    <link rel="apple-touch-icon" href="/images/icon-192x192.png">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> 

	

</head>


<body id="body" data-spy="scroll" data-target=".navbar" data-offset="55">
  <div id="content">
    

        <section class="sticky-top navigation">
	<div class="container">
		<nav class="navbar navbar-expand-lg navbar-dark">
			<a class="navbar-brand p-0" href="/">
				
				<img class="lozad" data-src="https://www.sharestats.nl/images/InfShareStatsColor.png" alt="ShareStats" height="42">
				
			</a>

			<button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navigation">
				<ul class="navbar-nav ml-auto">
					
					<li class="nav-item">
            <a class="nav-link" href="https://www.sharestats.nl#feature">about</a>
					</li>
					
					<li class="nav-item">
            <a class="nav-link" href="https://www.sharestats.nl#team">team</a>
					</li>
					
					<li class="nav-item">
            <a class="nav-link" href="https://www.sharestats.nl#blog">blog</a>
					</li>
					
					<li class="nav-item">
            <a class="nav-link" href="https://www.sharestats.nl#contact">contact</a>
					</li>
					
				</ul>
				
				<select id="select-language" onchange="location = this.value;">
					
					
					
					
					
					
					
					
					<option id="en" value="https://www.sharestats.nl/search/" selected>EN
					</option>
					
					
					
					
					
					
					
					
					
					
					
					
					
					<option id="nl" value="https://www.sharestats.nl/nl/search/">NL</option>
					
					
					
					
				</select>
				
			</div>
		</nav>
	</div>
</section>

        




<!-- Welcome Slider-->
<section class="hero-area notfullheight" style='background-image: url("https://www.sharestats.nl/images/backgrounds/hero-area-sharestats.webp"); background-attachment: fixed;'>
	
	<img class="d-none" src="https://www.sharestats.nl/images/backgrounds/hero-area-sharestats.webp" onerror="this.onerror=null;this.parentElement.style.backgroundImage= 'url(https:\/\/www.sharestats.nl\/images\/backgrounds\/hero-area-sharestats.jpg)'"/>


	<div class="block">
		<script src="../js/lunr.js"></script>
	

</script>
<!--import search.js-->



<!-- > All search -->
<script>

let documents;
let questionBody;
//console.log("localStorage.getItem(documents)",JSON.parse(localStorage.getItem("documents")));

function readTextFile(file)
{
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, false);
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status == 0)
            {
                var allText = rawFile.responseText;
				documents = JSON.parse(allText);
				console.log(documents[0].url);
            }
        }
    }
    rawFile.send(null);
}
readTextFile("./array.txt");


	/*	var documents = [{
			"id":  0 ,
			"url": "https:\/\/www.sharestats.nl\/questions\/vu-ancova-001-nl\/",
			"title": "vu-ancova-001-nl",
			"body": "Question In an experiment, a standard ANCOVA analysis investigates the effect of Social Stress (Two-group Factor: $Z_1$) on Performance (Dependent Variable: $y$). We control for Neuroticism (Covariate: $X$, with $\\overline{X} = 20$). The following estimated regression equation is found: $\\hat{y} = 25 \u002b 0.8X \u002b 2Z_1$. Calculate the adjusted means (adjusted means) for both groups of the Factor.\nAnswerlist  25 and 27. 20 and 25. 16 and 20. 41 and 43.  Meta-information exname: vu-ancova-001-nl extype: schoice exsolution: 0001 exsection: Inferential Statistics\/Parametric Techniques\/ANOVA\/ANCOVA exextra[Type]: Case, Calculation exextra[Language]: Dutch exextra[Level]: Statistical Thinking\n"
			},
			{
			"id":  1 ,
			"url": "https:\/\/www.sharestats.nl\/questions\/vu-ancova-002-nl\/",
			"title": "vu-ancova-002-nl",
			"body": "TEST test Tasos\n"
			},]; 
			*/

		var idx = lunr(function () {
			this.ref('id')
			this.field('title')
			this.field('body')
		
			documents.forEach(function (doc) {
				this.add(doc)
			}, this)
		});
		console.log('idx', idx);
		function lunr_search(term) {

			document.getElementById('lunrsearchresults').innerHTML = '<ul></ul>';
			if(term) {
				var results = idx.search(term);
				document.getElementById('lunrsearchresults').innerHTML = "<p>Search results for '" + term + "' ("+ results.length + " items)</p>" + document.getElementById('lunrsearchresults').innerHTML;
				
				console.log("results",results.length);
				if(results.length>0){
					for (var i = 0; i < results.length; i++) {
					
						var ref = results[i]['ref'];
						var url = documents[ref]['url'];
						var title = documents[ref]['title'];
						var body = documents[ref]['body'];

						//test question body
						var ques = documents[ref]['question'];
						
						//tasos start
						//keep body after 'exsection'; clean the string
						var body = body.replace('exsection:','exsection:Section:').split('exsection:')[1].replace('exextra[Program]:',"Program:").replace('exextra[Type]:', 'Type:').replace('exextra[Language]:', 'Language:').replace('exextra[Level]:', 'Level:');
						//split the string by row
						var bd = body.split(/\r?\n/).filter(element => element); //element used to to erase gaps
						//make new object var
						var bdobj = {};
						//map the object and erase the tag type from the keys (e.g., Section:)
						bd.forEach(element => {
  							bdobj[element.split(': ')[0]] = element.split(': ')[1];
												});						
						//remove the empty key-pairs
						Object.keys(bdobj).forEach(k => {if(bdobj[k] == '' || bdobj[k] == 'NA' || bdobj[k] == undefined){delete bdobj[k] }});
						

						var div = document.createElement("div");
						div.innerHTML = bdobj
						//body = div.textContent || div.innerText || "";
						//body = body.substring(0,500)+'';
						
						// create a function to print the tags (Type, Program, Level, language) as string 
						let PrintTagsFromObject = (o) => {
							var res = "";
							for (var key in o) {
								//erase 'Section:' tag bc we print it manually later
  							if(key != "Section" && o[key] != undefined){
							res += "<b><span class='body'>" + o[key] + "</span></b>" ;
							}
							}
							//console.log(res)
							return res;
 						};
						
							// create the QTI path
						var qti = url.replace(".Rmd", "-qti.zip");
						// create the TestVision path
						var tv = url.replace(".Rmd", "-tv.zip");
						// create the Item file path
						var ItemFolder = url.replace(".Rmd", "-ItemFolder.zip");
						//create GitHub repo path
						var gitrepo = url.split(title+".Rmd")[0].replace("https://raw.githubusercontent.com/","https://github.com/").replace("main","tree/main");

						document.querySelector('#lunrsearchresults ul').innerHTML = document.querySelector('#lunrsearchresults ul').innerHTML + "<li class='lunrsearchresult'><span class='lunrsearchresulttext'> </span>"+
							"<button type='button' class='collapsible'>" + title +"</button><div class='content'>  <p>" + ques + "</p></div>" +
							
							"<b><span class='body'>" + bdobj.Section + "</span></b><br/>"+ 
							PrintTagsFromObject(bdobj) +
							"<br/><span class='buttont'><a href='./question.html?q="+ ref+"'><i class='fa fa-eye' aria-hidden='true'></i> View Item </span></a>"+
							"<span class='buttont'><a href=" + gitrepo + ">Go to GitHub <i class='fa fa-github'></i></span></a>"+
							"<div class='dropdown'><button class='dropbtn'>&darr; Save File</button>"+
								"<div class='dropdown-content'>" +
									"<a href=" + ItemFolder + ">Item Folder</a>"+
									"<a href=" + qti + ">QTI v2.1</a>"+
									"<a href=" + tv + ">TestVision</a>"+
								"</div>"+
							"</div>"+
							"</li>"	
						
						
						// start:Function for collapsible
						var coll = document.getElementsByClassName("collapsible");
						var i;

						for (i = 0; i < coll.length; i++) {
						coll[i].addEventListener("click", function() {
							this.classList.toggle("active");
							var content = this.nextElementSibling;
							if (content.style.maxHeight){
							content.style.maxHeight = null;
							} else {
							content.style.maxHeight = content.scrollHeight + "px";
							}
						});
						}
						// end:Function for collapsible
					}
				}
			}
			if(!term || results.length == 0) {
					if(term) document.querySelector('#lunrsearchresults').innerHTML = "<p>No results found for '" + term + "'.<p>";
					else document.querySelector('#lunrsearchresults').innerHTML = "<p>No results found...<p>";
			}
			return false;
		}
		function getParameterByName(name) {
			name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
				results = regex.exec(location.search);
			return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}
		
	</script>

		
		<style>
			@import '../css/search-style.css';
		</style>
		
		<form onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
			<div>
				<label for="lunrsearch" style="display: none;">Search</label>
				<input type="search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="e.g., +ancova +dutch" />
				<input type="submit" value="Search" class="btn-main" />
			</div>
		</form>


		<p>The open statistics assessment itembank</p>
	</div>
</section>
<!-- /Welcome Slider-->

    <div class="container">
		
        <div id="lunrsearchresults">
            <p>No results found...</p>
        </div>
    </div>

<script>
    term = getParameterByName("q");
    document.getElementById('lunrsearch').value = term;
    if(term) lunr_search(term);
</script>





  </div><!-- end Contact Area -->

<footer id="footer" class="section-bg">
	<div class="container">
		<div class="row wow fadeInUp" data-wow-duration="500ms">
			<div class="col-xl-12">

				<!-- Footer Social Links -->
				<div class="social-icon">
					<ul class="list-inline">
						
						<li class="list-inline-item"><a href="https://github.com/ShareStats"><i class="ti-github"></i></a></li>
						
						<li class="list-inline-item"><a href="https://www.linkedin.com/groups/12464778/"><i class="ti-linkedin"></i></a></li>
						
					</ul>
				</div>

				<!-- copyright -->
				<div class="copyright text-center">
					<a href="https://www.sharestats.nl/">
						<img src="https://www.sharestats.nl/images/InfShareStatsColor.png" alt="ShareStats" height="42" />
					</a>
					<br>
					<p>Copyright © 2022 - powered by Hugo</p>
				</div>
			</div>
		</div>
	</div>

</footer>
<!-- /footer -->

<!-- Google Map API -->


<!-- JS Plugins -->

<script src="https://www.sharestats.nl/plugins/jquery/jquery.min.js"></script>

<script src="https://www.sharestats.nl/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://www.sharestats.nl/plugins/slick/slick.min.js"></script>

<script src="https://www.sharestats.nl/plugins/shuffle/shuffle.min.js"></script>

<script src="https://www.sharestats.nl/plugins/magnific-popup/jquery.magnific-popup.min.js"></script>

<script src="https://www.sharestats.nl/plugins/lazy-load/lozad.min.js"></script>

<script src="https://www.sharestats.nl/plugins/google-map/map.js"></script>


<!-- Main Script -->

<script src="https://www.sharestats.nl/js/script.min.5db5ae6f88052715e823d7c52f3fa7a832565352b0f76c1d2cee2a3b564a0716fa9d51878a9965389c3d856f2d7c6330.js" integrity="sha384-XbWub4gFJxXoI9fFLz&#43;nqDJWU1Kw92wdLO4qO1ZKBxb6nVGHipllOJw9hW8tfGMw"></script>


</body>

</html>
